{"version":3,"sources":["webpack:///src/components/DigitalRain/index.vue","webpack:///./src/components/DigitalRain/index.vue?5507","webpack:///./src/components/DigitalRain/index.vue","webpack:///src/view/DigitalRain/index.vue","webpack:///./src/view/DigitalRain/index.vue?ce56","webpack:///./src/view/DigitalRain/index.vue"],"names":["DigitalRain","name","data","canvasCtx","canvas","columns","rainDropPositionArray","speedCnt","requestID","props","Width","type","Number","default","Height","fontSize","fontFamily","String","textContent","textColor","backgroundColor","speedA","computed","speed","parseInt","this","mounted","initRAF","initCanvas","initRainDrop","animationUpdate","beforeDestroy","window","cancelAnimationFrame","methods","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","$refs","digitalRain","tagName","toLowerCase","alert","console","log","width","height","getContext","font","i","push","fillStyle","fillRect","len","length","Math","random","randomTextIndex","floor","randomText","textYPostion","fillText","components_DigitalRain","render","_h","$createElement","_self","_c","ref","staticRenderFns","view_DigitalRain","jj","document","body","clientWidth","components","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_view_DigitalRain","staticClass","attrs","DigitalRain_Component","DigitalRain_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/3.75ea1d91a5bc84d5a98a.js","sourcesContent":["<!--\r\n  describe:\r\n  1.传入数据:\r\n    选填项:\r\n      1.Width: Number,画布宽度，默认800\r\n      2.Height: Number,画布高度，默认600\r\n      3.fontSize: Number,数字雨字体大小，默认20\r\n      4.textContent: String,数字雨内容，默认小写a-z\r\n      5.textColor: String,数字雨颜色\r\n      6.backgroundColor： String,背景颜色，只能用rgba,并且透明度不能高，高了就没有拖影了\r\n      7.speedA: Number,速度，1最快越大越慢\r\n-->\r\n<template>\r\n  <canvas ref='digitalRain'></canvas>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'digitalRain',\r\n    data() {\r\n      return {\r\n        canvasCtx: null,\r\n        canvas: null,\r\n        columns: 0,\r\n        rainDropPositionArray: [],\r\n        speedCnt: 0,\r\n        requestID: null,  // window.requestAnimationFrame返回的id，销毁时需要\r\n      }\r\n    },\r\n    props: {\r\n      Width: {\r\n        type: Number,\r\n        default: 800\r\n      },\r\n      Height: {\r\n        type: Number,\r\n        default: 600\r\n      },\r\n      fontSize: {\r\n        type: Number,\r\n        default: 20\r\n      },\r\n      fontFamily: {\r\n        type: String,\r\n        default: 'arial'\r\n      },\r\n      textContent: {\r\n        type: String,\r\n        default: 'abcdefghijklmnopqrstuvwxyz'\r\n      },\r\n      textColor: {\r\n        type: String,\r\n        default: '#0F0',\r\n      },\r\n      backgroundColor: {\r\n        type: String,\r\n        default: 'rgba(0,0,0,0.1)',\r\n      },\r\n      speedA: {\r\n        type: Number,\r\n        default: 10,\r\n      }\r\n    },\r\n    computed: {\r\n      speed() {\r\n        return parseInt(this.speedA)\r\n      }\r\n    },\r\n    mounted: function() {\r\n      this.initRAF();\r\n      this.initCanvas();\r\n      this.initRainDrop();\r\n      this.animationUpdate();\r\n    },\r\n    beforeDestroy(){\r\n      window.cancelAnimationFrame(this.requestID);  // 必须销毁，否则跳转其他页面循环依旧在继续\r\n    },\r\n    methods: {\r\n      initRAF() {\r\n        /* requestAnimationFrame专门用于重绘实现动画\r\n           与setTimeout类似，但性能比setTimeout好的多，\r\n           接受一个回调函数，大概15m后会调用。\r\n         */\r\n        window.requestAnimationFrame = (function() { // 适配不同浏览器固定写法，复制粘贴就行了\r\n          return window.requestAnimationFrame ||\r\n            window.webkitRequestAnimationFrame ||\r\n            window.mozRequestAnimationFrame ||\r\n            window.oRequestAnimationFrame ||\r\n            function(callback) { // 如果都没有就只能用性能最烂的setTimeout凑合\r\n              window.setTimeout(callback, 1000 / 60);\r\n            };\r\n        })();\r\n        window.cancelAnimationFrame = (function() { // 适配不同浏览器固定写法，复制粘贴就行了\r\n          return window.cancelAnimationFrame ||\r\n            window.webkitCancelAnimationFrame ||\r\n            window.mozCancelAnimationFrame ||\r\n            window.oCancelAnimationFrame ||\r\n            function(id) {\r\n              window.clearTimeout(id);\r\n            };\r\n        })();\r\n      },\r\n      initCanvas() {\r\n        this.canvas = this.$refs.digitalRain;\r\n        //需要判断获取到的canvas是否是真的canvas\r\n        if (this.canvas.tagName.toLowerCase() !== 'canvas') {\r\n          alert(\"Error! Invalid canvas! Please check the canvas's ref!\");\r\n          console.log('WDNMD,这你都能获取歪');\r\n        }\r\n        this.canvas.width = this.Width;\r\n        this.canvas.height = this.Height;\r\n        this.canvasCtx = this.canvas.getContext('2d'); // 目前唯一合法值就是2d，说不定未来canvas可以绘制3D了就可以传个3d进去\r\n        // console.log(this.canvasCtx);\r\n        this.canvasCtx.font = this.fontSize + 'px ' + this.fontFamily;  //设置文字属性\r\n        this.columns = this.canvas.width / this.fontSize;\r\n      },\r\n      initRainDrop() {\r\n        for (var i = 0; i < this.columns; i++) { // 下落列，有多少列填充多少个0\r\n          this.rainDropPositionArray.push(0);\r\n        }\r\n      },\r\n      animationUpdate() {\r\n        // console.log('1');\r\n        this.speedCnt++;\r\n        //speed为1最快，越大越慢\r\n        if (this.speedCnt === this.speed) { // speedCnt 累加,等于speed时重置为0并进行一次重绘\r\n          this.speedCnt = 0;\r\n          // 先绘制一层背景\r\n          // console.log(this.canvasCtx);\r\n          this.canvasCtx.fillStyle = this.backgroundColor; // 将画笔颜色设置为背景颜色，不设置默认纯黑\r\n          // fillRect进行绘制'已填色'的矩形，四个参数分别为x,y开始和结束坐标，fillRect多次调用会进行叠加\r\n          // 直接将新一次图绘制到上一层之上，这样带透明的的背景就会层层加深，将以前绘制文字\r\n          // 层层覆盖压低颜色,达到拖尾虚影的效果\r\n          this.canvasCtx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n          // 再绘制一层文字\r\n          this.canvasCtx.fillStyle = this.textColor; // 将画笔颜色设置为文字颜色\r\n          for (var i = 0, len = this.rainDropPositionArray.length; i < len; i++) { // 按列绘制\r\n            if (this.rainDropPositionArray[i] <= 0) {  // 初始下落时给个随机值达到不同步下落\r\n              if (Math.random() > 0.9) {\r\n                this.rainDropPositionArray[i]++;\r\n              }\r\n            }else{\r\n              this.rainDropPositionArray[i]++; // 每列的数字每绘制一次，就加1，初始填充的为0，用于判断是否落到底部\r\n\r\n              var randomTextIndex = Math.floor(Math.random() * this.textContent.length); // 从文本库中随机选中一个字符\r\n              var randomText = this.textContent[randomTextIndex];\r\n\r\n              var textYPostion = (this.rainDropPositionArray[i]-1) * this.fontSize; // 判断y轴绘制位置\r\n\r\n              // fillText绘制文字,参数分别为:要绘制的文字,x轴位置,Y轴位置，同样是覆盖\r\n              this.canvasCtx.fillText(randomText, i * this.fontSize, textYPostion);\r\n              if (textYPostion > this.Height) { // 到达底部后重新归0\r\n                this.rainDropPositionArray[i] = 0;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.requestID = window.requestAnimationFrame(this.animationUpdate); // 类似于setInterval,大概一秒运行60-75次\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/DigitalRain/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{ref:\"digitalRain\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59f0a1f1\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DigitalRain/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59f0a1f1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59f0a1f1\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-59f0a1f1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DigitalRain/index.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"DigitalRain\" class=\"flex_center\">\r\n    <DigitalRain :Width=\"Width\" :Height='Height' :speedA='2'></DigitalRain>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import DigitalRain from '@/components/DigitalRain/index.vue'\r\n  export default {\r\n    data() {\r\n      return {\r\n        jj: '爱神的箭疯狂练级啊了解撒法鲁克的撒娇法律可是大家撒开了房间啊收到了f十大' +\r\n        '就发卡撒旦开发艰苦拉萨大家发的就撒开发两件大事了咖啡艰苦拉萨大家弗兰克氨基酸独立开发就爱上了打开解放立刻撒旦解放立刻时间分厘卡叫阿里',\r\n      }\r\n    },\r\n    computed:{\r\n      Width() {\r\n        return document.body.clientWidth*0.95\r\n      },\r\n      Height() {\r\n        return 0.45*this.Width\r\n      }\r\n    },\r\n    mounted(){\r\n    },\r\n    methods:{\r\n    },\r\n    components:{ DigitalRain}\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/DigitalRain/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex_center\",attrs:{\"id\":\"DigitalRain\"}},[_c('DigitalRain',{attrs:{\"Width\":_vm.Width,\"Height\":_vm.Height,\"speedA\":2}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e02fcd7\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/DigitalRain/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e02fcd7\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e02fcd7\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6e02fcd7\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/DigitalRain/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}