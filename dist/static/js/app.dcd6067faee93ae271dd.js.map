{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/utils/webSocket.js","webpack:///./src/utils/formatDate.js","webpack:///./src/App.vue?9ba8","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/vuex/store.js","webpack:///./src/utils/http.js","webpack:///./src/main.js"],"names":["App","WebSocketClass","url","classCallCheck_default","this","heartCheck","num","start","that","_num","setTimeout","ws","send","colse","e","console","log","wsUrl","lockReconnect","tt","createWebSocket","WebSocket","init","reconnect","onclose","onerror","onopen","onmessage","event","data","time","d","Date","month","getMonth","day","getDate","year","getFullYear","hours","getHours","seconds","getSeconds","minutes","getMinutes","length","join","name","now","ss","texts","mounted","cli","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","$options","settime","then","res","$get","catch","rej","stop","promise_default","resolve","reject","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticClass","_v","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Vue","use","Router","router","routes","path","component","bind","Vuex","store","Store","state","autoCheck","mutations","changAutoCheck","value","actions","setAutoCheck","context","commit","getters","getAutoCheck","axios","defaults","timeout","baseURL","interceptors","response","error","message","includes","Message","type","config","productionTip","ElementUI","prototype","$post","arguments","undefined","token","localStorage","getItem","post","extends_default","err","params","get","el","components","template"],"mappings":"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","file":"static/js/app.dcd6067faee93ae271dd.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"flex_row_center\">\n      head\n    </div>\n    <router-view/>\n  </div>\n</template>\n\n<script>\n  import WebSocketClass from '@/utils/webSocket.js'\n  import formatDate from '@/utils/formatDate.js'\n  export default {\n    name: 'App',\n    data() {\n      return {\n        now: '',\n        ss: 0,\n        texts: '',\n      }\n    },\n    mounted() {\n      // const socket = new WebSocketClass('ws://ws.maixiaobu.cn:8977?group=admin')\n      // console.log(formatDate.format(new Date))\n      this.cli()\n    },\n    methods:{\n      async cli() {\n        await this.$options.methods.settime().then(res => {\n          console.log(res)\n        })\n        await this.$get('').then(res => {\n          console.log('d')\n        }).catch(rej => {\n          console.log(rej)\n        })\n        console.log('afsd')\n      },\n      settime() {\n        return new Promise((resolve, reject) => {  // 必须要返回一个Promise ,await才会生效\n          setTimeout(() => {\n            resolve('asf')\n          },2000)\n        })\n      }\n    },\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background: skyblue;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","/**\n * @description  webSocket持久化连接\n */\n\nexport default class WebSocketClass{\n  constructor(url) {\n    this.ws = null   // websocket对象\n    this.wsUrl = url\n    this.lockReconnect = false   // 避免重复连接\n    this.tt = null\n    this.createWebSocket()\n  }\n\n  createWebSocket() {  // 创建WebSocket连接\n    try {\n      this.ws = new WebSocket(this.wsUrl);\n      this.init();\n    } catch(e) {\n      console.log('连接错误:' + e)\n      this.reconnect(this.wsUrl);\n    }\n  }\n\n  init() {  // 初始化\n    let that = this\n    this.ws.onclose = function () {\n      console.log('链接断开')\n      that.reconnect(that.wsUrl)\n    }\n    this.ws.onerror = function() {\n      console.log('链接异常')\n      that.reconnect(that.wsUrl)\n    }\n    this.ws.onopen = function () {\n      console.log('连接正常')\n      that.heartCheck.start(that)  // 函数内部this指代init(){}里的上下文，要强行用that存在最外面class的上下文\n    }\n    this.ws.onmessage = function (event) {  // 收到消息\n      console.log(event.data)\n      //拿到任何消息都说明当前连接是正常的\n      that.heartCheck.start(that)\n    }\n  }\n\n  reconnect(url) {  // 重链接\n    let that = this\n    console.log('重连')\n    if(this.lockReconnect) {\n      console.log('重连接已锁，不做处理')\n      return;\n    };\n    this.lockReconnect = true\n    //没连接上会一直重连，设置延迟避免请求过多\n    setTimeout(function () {\n      that.lockReconnect = false\n      that.createWebSocket()\n    }, 4000)\n  }\n\n  heartCheck = {  // 心跳检测\n    num: 3,  // 3次心跳均未响应重连\n    start: function(that){\n      var _num = this.num  // 这里this指代heartCheck自身上下文\n      setTimeout(function(){\n          try{\n            /*这里发送一个心跳，后端收到后，返回一个心跳消息，\n            onmessage拿到返回的心跳就说明连接正常*/\n            that.ws.send(\"test\")\n            _num--\n            //计算答复的超时次数\n            if(_num === 0) {\n              that.ws.colse()\n            }\n          }catch(e){\n            console.log(e)\n          }\n      }, 300*1000)  // 每3分钟发送一次心跳\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/webSocket.js","export default class formatDate{\n  /**\n    * @param {Date} time\n    * @return {String}\n    * @example formatDate.format(new Date)\n    * @description 将Date对象,或非标准格式日期字符串转为标准日期String类型\n   */\n  static format(time){\n    // if(!(date instanceof Date)) return '';\n    var d = new Date(time),\n    month = '' + (d.getMonth() + 1),\n    day = '' + d.getDate(),\n    year = d.getFullYear(),\n    hours = d.getHours()+'',\n    seconds = d.getSeconds() + '',\n    minutes = d.getMinutes()+'';\n\n    if (month.length < 2) month = '0' + month;\n    if (day.length < 2) day = '0' + day;\n    if (hours.length < 2) hours = '0' + hours;\n    if (minutes.length < 2) minutes = '0' + minutes;\n    if (seconds.length < 2) seconds = '0' + seconds;\n\n    return [year, month, day].join('-') + ' ' +[hours, minutes, seconds].join(':');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/formatDate.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"flex_row_center\"},[_vm._v(\"\\n    head\\n  \")]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-0e5ec740\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e5ec740\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e5ec740\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0e5ec740\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/index',\n      name: 'HelloWorld',\n      component: () => import('@/view/HelloWorld/home')\n    },\n    {\n      path: '/login',\n      name: 'login',\n      component: () => import('@/view/login/home')\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nVue.use(Vuex)\n\nconst state = {  //这里放全局参数,获取ex: this.$store.state.autoCheck,一般使用getters来获取\n  autoCheck: true,  // 表单提交时转换该值，输入组件监听根据需要自动检测输入是否为空\n}\nconst getters = {  // 获取函数,ex: this.$store.getter.getAutoCheck\n  getAutoCheck: state => { // 方便统一对返回值做一些处理\n    return state.autoCheck\n  },\n}\nconst mutations = {  //这里是set方法,ex:this.$store.commit('changAutoCheck',value)\n  changAutoCheck(state,value){\n    state.autoCheck = value\n  }\n}\nconst actions = {         //异步修改数据仓库,ex: this.$store.dispatch('setAutoCheck',value)\n  setAutoCheck(context,value){\n    context.commit('changAutoCheck',value)\n  }\n}\n\nexport default new Vuex.Store({\n  state,\n  mutations,\n  actions,\n  getters,\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/vuex/store.js","// npm install axios,elementui -S\n/**\n * @description http连接封装\n*/\n\nimport axios from 'axios';\r\nimport {\r\n  Message\r\n} from 'element-ui';\r\nimport router from '../router'\r\n\r\naxios.defaults.timeout = 5000;\r\n// axios.defaults.baseURL = 'http://www.51jl.store/api';\naxios.defaults.baseURL = 'http://www.4399.com';\r\n\r\n//http request 拦截器\r\n// axios.interceptors.request.use(\r\n//   config => {\r\n//     // const token = getCookie('名称');注意使用的时候需要引入cookie方法，推荐js-cookie\r\n//     // config.data = JSON.stringify(config.data);\n//     let token = \"token:\" + localStorage.getItem('token')\r\n//     // config.headers = {\r\n//     //   'Content-Type': 'application/x-www-form-urlencoded'\r\n//     // }\n//     console.log(config)\r\n//     // if(token){\r\n//     //   config.params = {'token':token}\r\n//     // }\r\n//     return config;\r\n//   },\r\n//   error => {\r\n//     return Promise.reject(err);\r\n//   }\r\n// );\r\n\r\n\r\n//http response 拦截器\r\naxios.interceptors.response.use(\r\n  response => {\r\n    // if (response.data.code == 10002) {\r\n    //   Message({\r\n    //     showClose: true,\r\n    //     message: '登录过期',\r\n    //     type: 'error',\r\n    //     duration: 1000\r\n    //   })\r\n    //   localStorage.clear()\r\n    //   router.push({\r\n    //     path: \"/login\",\r\n    //     querry: {\r\n    //       redirect: router.currentRoute.fullPath\r\n    //     } //从哪个页面跳转\r\n    //   })\r\n    // }\r\n    return response;\r\n  },\r\n  error => {\n    if(error.message.includes('timeout')){\n      Message({\n        message: '连接超时,请检查您的网络状况后刷新页面',\n        type: 'error'\n      })\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n\r\n/**\r\n * 封装get方法\r\n * @param url\r\n * @param data\r\n * @returns {Promise}\r\n */\r\n\r\nexport function get(url, params = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    axios.get(url, {\r\n      params: params\r\n    }).then(response => {\r\n      resolve(response.data);\r\n    }).catch(err => {\r\n      reject(err)\r\n    })\r\n  })\r\n}\r\n\r\n\r\n/**\r\n * 封装post请求\r\n * @param url\r\n * @param data\r\n * @returns {Promise}\r\n */\r\n\r\nexport function post(url, data = {}) {\n  let token = localStorage.getItem('token')\r\n  return new Promise((resolve, reject) => {\r\n    axios.post(url, {...data, token}).then(response => {\r\n      resolve(response.data);\r\n    }, err => {\r\n      reject(err)\r\n    })\r\n  })\r\n}\r\n\r\n/**\r\n * 封装patch请求\r\n * @param url\r\n * @param data\r\n * @returns {Promise}\r\n */\r\n\r\n// export function patch(url, data = {}) {\r\n//   return new Promise((resolve, reject) => {\r\n//     axios.patch(url, data)\r\n//       .then(response => {\r\n//         resolve(response.data);\r\n//       }, err => {\r\n//         reject(err)\r\n//       })\r\n//   })\r\n// }\r\n\r\n/**\r\n * 封装put请求\r\n * @param url\r\n * @param data\r\n * @returns {Promise}\r\n */\r\n\r\n// export function put(url, data = {}) {\r\n//   return new Promise((resolve, reject) => {\r\n//     axios.put(url, data)\r\n//       .then(response => {\r\n//         resolve(response.data);\r\n//       }, err => {\r\n//         reject(err)\r\n//       })\r\n//   })\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/http.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from './vuex/store.js'\nimport {post,get} from '@/utils/http'   // axois封装\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\n// import '@/element-theme.scss'  // elementui主题色修改\r\nimport 'asset/css/myCss.css'  // 自定义css库\nimport 'asset/css/reset.css'  // 消除浏览器样式\n\nVue.config.productionTip = false\n\nVue.use(ElementUI)\nVue.prototype.$post=post;  // use way: this.$post(url,data).then(res => {})\r\nVue.prototype.$get=get;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}